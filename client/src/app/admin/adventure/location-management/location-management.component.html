<div *ngIf="location !== undefined">
  <div class="container">
    <div class="row">
      <div class="col-10 no-padding">
        <h3>{{location.roomNumber>0? location.roomNumber+ ' - ':null}}{{ location.name }}</h3>
        <p class="ms-3"><strong>Description: </strong>{{ location.description }}</p>
      </div>
      <div class="col-2 no-padding">
        <button class="btn btn-dark" (click)="backToAdventure()">
          Back to adventure
        </button>

        
      </div>
    </div>

    <!-- NPC's -->
    <div class="row mt-3">
      <div class="col-10 no-padding">
        <h5>NPCs</h5>
      </div>
      <div class="col-2 no-padding">
        <button class="btn btn-dark col-2" (click)="createNpc()">
          Add New NPC
        </button>
      </div>
    </div>
    <div *ngFor="let npc of location.npCs" class="element-div mt-1 ms-1">
      <div class="row">
        <div class="col-11" (click)="editNpc(npc.id)">
          <h6>{{ npc.name }}</h6>
          <p>
            <span style="font-weight: bold">Caption: </span>{{ npc.caption }}
          </p>
        </div>
        <div class="col-1 text-center">
          <button
            class="btn btn-danger col-1 mt-2 mb-2 btn-icon"
            (click)="deleteNpc(npc)"
          >
            <i class="fa fa-trash"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Interactions's -->
    <div class="row mt-3">
      <div class="col-10 no-padding">
        <h5>Interactions</h5>
      </div>
      <div class="col-2 no-padding">
        <button class="btn btn-dark" (click)="createInteraction()">
          Add New Interaction
        </button>
      </div>
    </div>
    <div *ngFor="let i of location.interactions" class="element-div mt-1 ms-1">
      <div class="row">
        <div class="col-11" (click)="editNpc(i.id)">
          <h6>{{ i.name }}</h6>
          <p>
            <span style="font-weight: bold">Information: </span
            >{{ i.information }}
          </p>
        </div>
        <div class="col-1 text-center">
          <button
            class="btn btn-danger col-1 mt-2 mb-2 btn-icon"
            (click)="deleteInteraction(i)"
          >
            <i class="fa fa-trash"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Containers -->
    <div class="row mt-1">
      <div class="col-10 no-padding">
        <h5>Containers</h5>
      </div>
      <div class="col-2 no-padding">
        <button class="btn btn-dark" (click)="createContainer()">
          Add New Container
        </button>
      </div>
    </div>
    <div *ngFor="let c of location.containers" class="element-div mt-1 ms-1">
      <div class="row">
        <div class="col-11">
          <h6>{{ c.name }}</h6>
          <button class="btn btn-dark" (click)="addItemToContainer(c)">
            Add Item
          </button>
        </div>
        <div class="col-1 text-center">
          <button
            class="btn btn-danger col-1 mt-2 mb-2 btn-icon"
            (click)="deleteContainer(c)"
          >
            <i class="fa fa-trash"></i>
          </button>
        </div>
      </div>
      <table style="width: 100%">
        <thead>
          <th style="width: 20%">Name</th>
          <th style="width: 15%">Attack value</th>
          <th style="width: 15%">Armor value</th>
          <th style="width: 15%">Required Level</th>
          <th style="width: 15%">Modifiers</th>
        </thead>
        <tbody>
          <tr *ngFor="let i of c.items">
            <td>{{ i.name }}</td>
            <td>{{ i.attackValue }}</td>
            <td>{{ i.armorValue }}</td>
            <td>{{ i.requiredLevel }}</td>
            <td>{{ i.statModifiers.length > 0 ? i.statModifiers : "None" }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Connected Locations -->
    <div class="row mt-1">
      <div class="col-8 no-padding">
        <h5>Connected Locations</h5>
      </div>

      <div class="col-2 no-padding">
        <button class="btn btn-dark" (click)="createLocation()">
          Add Location
        </button>
      </div>
      <div class="col-2 no-padding">
        <button class="btn btn-dark" (click)="createLocationLink()">
          Add Location Link
        </button>
      </div>
      
    </div>

    <div
      *ngFor="let l of location.connectedLocations"
      class="element-div mt-1 ms-1 no-padding"
    >
      <div class="row no-padding m-0">
        <div class="col-11 no-padding" (click)="editLocation(l.id)">
          <h6 class="m-0">{{l.roomNumber>0? l.roomNumber+ ' - ':null}}{{ l.name }}</h6>
          <p class="m-0"><strong>Description: </strong>{{ l.description }}</p>
        </div>
        <div class="col-1 text-center no-padding">
          <button
            class="btn btn-danger btn-icon"
            (click)="deleteLocation(l.id)"
          >
            <i class="fa fa-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
